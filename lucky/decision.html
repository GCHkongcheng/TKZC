<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸®ä½ å†³ç­– - å¹¸è¿å åœ</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #3f51b5, #7e57c2);
            color: #fff;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 1000px;
            width: 90%;
            margin: 2rem auto;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .decision-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .options-section {
            margin-bottom: 2rem;
        }
        
        .options-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .option-item {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 500px;
        }
        
        .option-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            margin-right: 0.5rem;
        }
        
        .remove-option {
            background: rgba(255, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .remove-option:hover {
            background: rgba(255, 0, 0, 0.8);
        }
        
        .add-option {
            background: #4caf50;
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        .add-option:hover {
            background: #388e3c;
        }
        
        .wheel-section {
            display: none;
            margin-top: 2rem;
        }
        
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }
        
        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #ff9800;
            z-index: 10;
        }
        
        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom left;
            clip-path: polygon(0 0, 100% 0, 0 100%);
            left: 50%;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            color: white;
        }
        
        .spin-button {
            background: #ff9800;
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .spin-button:hover {
            background: #f57c00;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .spin-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-section {
            display: none;
            margin-top: 2rem;
            animation: fadeIn 1s ease;
        }
        
        .result-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: #FFD700;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }
        
        .result-content {
            background: rgba(255, 255, 255, 0.15);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            font-size: 1.5rem;
        }
        
        .start-button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        .start-button:hover {
            background: #388e3c;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .back-button {
            margin-top: 2rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        footer {
            margin-top: auto;
            padding: 1rem;
            text-align: center;
            width: 100%;
            background: rgba(0, 0, 0, 0.2);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .wheel-container {
                width: 250px;
                height: 250px;
            }
            
            .wheel-segment {
                font-size: 0.8rem;
                padding-right: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ å¸®ä½ å†³ç­– ğŸ¯</h1>
        <p>æ— æ³•åšå‡ºé€‰æ‹©ï¼Ÿè®©å‘½è¿ä¹‹è½®ä¸ºä½ æŒ‡æ˜æ–¹å‘</p>
        
        <div class="decision-container">
            <div class="options-section" id="options-section">
                <h2>è¾“å…¥ä½ çš„é€‰é¡¹</h2>
                <p>æ·»åŠ è‡³å°‘ä¸¤ä¸ªé€‰é¡¹ï¼Œç„¶åç‚¹å‡»"å¼€å§‹å†³ç­–"æŒ‰é’®</p>
                
                <div class="options-list" id="options-list">
                    <div class="option-item">
                        <input type="text" class="option-input" placeholder="é€‰é¡¹1" value="åƒä¸­é¤">
                        <button class="remove-option">Ã—</button>
                    </div>
                    <div class="option-item">
                        <input type="text" class="option-input" placeholder="é€‰é¡¹2" value="åƒè¥¿é¤">
                        <button class="remove-option">Ã—</button>
                    </div>
                </div>
                
                <button class="add-option" id="add-option-btn">æ·»åŠ é€‰é¡¹</button>
                <button class="start-button" id="start-btn">å¼€å§‹å†³ç­–</button>
            </div>
            
            <div class="wheel-section" id="wheel-section">
                <h2>è½¬åŠ¨å‘½è¿ä¹‹è½®</h2>
                <p>ç‚¹å‡»"è½¬åŠ¨"æŒ‰é’®ï¼Œè®©å‘½è¿ä¸ºä½ åšå‡ºé€‰æ‹©</p>
                
                <div class="wheel-container">
                    <div class="wheel-pointer"></div>
                    <div class="wheel" id="wheel">
                        <!-- è½¬ç›˜åˆ†æ®µä¼šåœ¨JavaScriptä¸­åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <button class="spin-button" id="spin-btn">è½¬åŠ¨</button>
                
                <div class="result-section" id="result">
                    <h2 class="result-title">å†³ç­–ç»“æœ</h2>
                    <div class="result-content" id="result-content">
                        <!-- ç»“æœä¼šåœ¨JavaScriptä¸­åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
        
        <button class="back-button" onclick="location.href='index.html'">è¿”å›ä¸»é¡µ</button>
    </div>
    
    <footer>
        <p>Â© 2025 å¹¸è¿å åœ | ä»…ä¾›å¨±ä¹ï¼Œè¯·å‹¿è¿‡åº¦æ²‰è¿·</p>
    </footer>
    
    <script>
        // å…¨å±€å˜é‡
        let options = ['åƒä¸­é¤', 'åƒè¥¿é¤'];
        let isSpinning = false;
        let selectedOption = null;
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ·»åŠ é€‰é¡¹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('add-option-btn').addEventListener('click', addOption);
            
            // å¼€å§‹å†³ç­–æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('start-btn').addEventListener('click', startDecision);
            
            // è½¬åŠ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('spin-btn').addEventListener('click', spinWheel);
            
            // åˆå§‹åŒ–åˆ é™¤æŒ‰é’®äº‹ä»¶
            initRemoveButtons();
        });
        
        // åˆå§‹åŒ–åˆ é™¤æŒ‰é’®äº‹ä»¶
        function initRemoveButtons() {
            document.querySelectorAll('.remove-option').forEach(button => {
                button.addEventListener('click', function() {
                    if (document.querySelectorAll('.option-item').length > 2) {
                        this.parentElement.remove();
                        updateOptionsArray();
                    } else {
                        alert('è‡³å°‘éœ€è¦ä¸¤ä¸ªé€‰é¡¹');
                    }
                });
            });
        }
        
        // æ·»åŠ é€‰é¡¹
        function addOption() {
            const optionsList = document.getElementById('options-list');
            const optionCount = optionsList.children.length + 1;
            
            const optionItem = document.createElement('div');
            optionItem.className = 'option-item';
            
            const optionInput = document.createElement('input');
            optionInput.type = 'text';
            optionInput.className = 'option-input';
            optionInput.placeholder = `é€‰é¡¹${optionCount}`;
            
            const removeButton = document.createElement('button');
            removeButton.className = 'remove-option';
            removeButton.textContent = 'Ã—';
            removeButton.addEventListener('click', function() {
                if (document.querySelectorAll('.option-item').length > 2) {
                    this.parentElement.remove();
                    updateOptionsArray();
                } else {
                    alert('è‡³å°‘éœ€è¦ä¸¤ä¸ªé€‰é¡¹');
                }
            });
            
            optionItem.appendChild(optionInput);
            optionItem.appendChild(removeButton);
            optionsList.appendChild(optionItem);
            
            // åˆå§‹åŒ–æ–°æ·»åŠ çš„åˆ é™¤æŒ‰é’®äº‹ä»¶
            initRemoveButtons();
            
            // èšç„¦åˆ°æ–°æ·»åŠ çš„è¾“å…¥æ¡†
            optionInput.focus();
        }
        
        // æ›´æ–°é€‰é¡¹æ•°ç»„
        function updateOptionsArray() {
            options = [];
            document.querySelectorAll('.option-input').forEach(input => {
                options.push(input.value.trim() || input.placeholder);
            });
        }
        
        // å¼€å§‹å†³ç­–
        function startDecision() {
            // æ›´æ–°é€‰é¡¹æ•°ç»„
            updateOptionsArray();
            
            // æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆé€‰é¡¹
            const validOptions = options.filter(option => option.trim() !== '');
            if (validOptions.length < 2) {
                alert('è¯·è‡³å°‘è¾“å…¥ä¸¤ä¸ªæœ‰æ•ˆé€‰é¡¹');
                return;
            }
            
            // éšè—é€‰é¡¹éƒ¨åˆ†ï¼Œæ˜¾ç¤ºè½¬ç›˜éƒ¨åˆ†
            document.getElementById('options-section').style.display = 'none';
            document.getElementById('wheel-section').style.display = 'block';
            
            // åˆ›å»ºè½¬ç›˜
            createWheel(validOptions);
        }
        
                // åˆ›å»ºè½¬ç›˜ - å®Œå…¨é‡å†™è½¬ç›˜åˆ›å»ºé€»è¾‘
        function createWheel(items) {
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            
            const colors = [
                '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#3949ab',
                '#1e88e5', '#039be5', '#00acc1', '#00897b', '#43a047',
                '#7cb342', '#c0ca33', '#fdd835', '#ffb300', '#fb8c00'
            ];
            
            // åˆ›å»ºä¸€ä¸ªSVGå…ƒç´ æ¥ç»˜åˆ¶è½¬ç›˜
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "100%");
            svg.setAttribute("viewBox", "0 0 100 100");
            
            // è®¡ç®—æ¯ä¸ªæ‰‡å½¢çš„è§’åº¦
            const segmentAngle = 360 / items.length;
            const centerX = 50;
            const centerY = 50;
            const radius = 50;
            
            // åˆ›å»ºæ‰‡å½¢
            for (let i = 0; i < items.length; i++) {
                const startAngle = i * segmentAngle;
                const endAngle = (i + 1) * segmentAngle;
                
                // è®¡ç®—æ‰‡å½¢çš„è·¯å¾„
                const startRad = (startAngle - 90) * Math.PI / 180;
                const endRad = (endAngle - 90) * Math.PI / 180;
                
                const x1 = centerX + radius * Math.cos(startRad);
                const y1 = centerY + radius * Math.sin(startRad);
                const x2 = centerX + radius * Math.cos(endRad);
                const y2 = centerY + radius * Math.sin(endRad);
                
                // åˆ›å»ºæ‰‡å½¢è·¯å¾„
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
                
                const d = [
                    `M ${centerX},${centerY}`,
                    `L ${x1},${y1}`,
                    `A ${radius},${radius} 0 ${largeArcFlag} 1 ${x2},${y2}`,
                    "Z"
                ].join(" ");
                
                path.setAttribute("d", d);
                path.setAttribute("fill", colors[i % colors.length]);
                path.setAttribute("stroke", "#fff");
                path.setAttribute("stroke-width", "0.2");
                
                svg.appendChild(path);
            }
            
            // åˆ›å»ºä¸­å¿ƒç‚¹
            const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute("cx", centerX);
            circle.setAttribute("cy", centerY);
            circle.setAttribute("r", "3");
            circle.setAttribute("fill", "white");
            svg.appendChild(circle);
            
            wheel.appendChild(svg);
            
            // é‡ç½®è½¬ç›˜æ—‹è½¬
            wheel.style.transform = 'rotate(0deg)';
            
            // åˆ›å»ºé¢œè‰²å›¾ä¾‹
            createColorLegend(items, colors);
        }
        
        // åˆ›å»ºé¢œè‰²å›¾ä¾‹
        function createColorLegend(items, colors) {
            // å…ˆæ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨å›¾ä¾‹ï¼Œå¦‚æœå­˜åœ¨åˆ™ç§»é™¤
            const existingLegend = document.getElementById('color-legend');
            if (existingLegend) {
                existingLegend.remove();
            }
            
            // åˆ›å»ºå›¾ä¾‹å®¹å™¨
            const legend = document.createElement('div');
            legend.id = 'color-legend';
            legend.style.marginTop = '2rem';
            legend.style.display = 'flex';
            legend.style.flexDirection = 'column';
            legend.style.alignItems = 'center';
            legend.style.gap = '0.5rem';
            legend.style.maxWidth = '300px';
            legend.style.margin = '2rem auto';
            
            // åˆ›å»ºå›¾ä¾‹æ ‡é¢˜
            const legendTitle = document.createElement('h3');
            legendTitle.textContent = 'é€‰é¡¹å¯¹ç…§è¡¨';
            legendTitle.style.margin = '0 0 0.5rem 0';
            legend.appendChild(legendTitle);
            
            // åˆ›å»ºæ¯ä¸ªé€‰é¡¹çš„å›¾ä¾‹é¡¹
            items.forEach((item, index) => {
                const legendItem = document.createElement('div');
                legendItem.style.display = 'flex';
                legendItem.style.alignItems = 'center';
                legendItem.style.width = '100%';
                legendItem.style.padding = '0.5rem';
                legendItem.style.borderRadius = '5px';
                legendItem.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
                
                const colorBox = document.createElement('div');
                colorBox.style.width = '20px';
                colorBox.style.height = '20px';
                colorBox.style.backgroundColor = colors[index % colors.length];
                colorBox.style.marginRight = '1rem';
                colorBox.style.borderRadius = '3px';
                
                const itemText = document.createElement('div');
                itemText.textContent = item;
                itemText.style.flex = '1';
                itemText.style.overflow = 'hidden';
                itemText.style.textOverflow = 'ellipsis';
                itemText.style.whiteSpace = 'nowrap';
                
                legendItem.appendChild(colorBox);
                legendItem.appendChild(itemText);
                legend.appendChild(legendItem);
            });
            
            // å°†å›¾ä¾‹æ·»åŠ åˆ°è½¬ç›˜éƒ¨åˆ†
            document.getElementById('wheel-section').appendChild(legend);
        }
        
                       // è½¬åŠ¨è½¬ç›˜
        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            document.getElementById('spin-btn').disabled = true;
            document.getElementById('result').style.display = 'none';
            
            // æ›´æ–°é€‰é¡¹æ•°ç»„
            updateOptionsArray();
            
            // é‡ç½®è½¬ç›˜ä½ç½®ï¼Œç¡®ä¿æ¯æ¬¡æ—‹è½¬éƒ½ä»0åº¦å¼€å§‹
            const wheel = document.getElementById('wheel');
            wheel.style.transition = 'none';
            wheel.style.transform = 'rotate(0deg)';
            
            // å¼ºåˆ¶é‡ç»˜ä»¥ç¡®ä¿é‡ç½®ç”Ÿæ•ˆ
            wheel.offsetHeight;
            
            // æ¢å¤è½¬ç›˜åŠ¨ç”»æ•ˆæœ
            wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
            
            // ç”Ÿæˆéšæœºæ—‹è½¬è§’åº¦ï¼ˆå¤šè½¬å‡ åœˆå†åœä¸‹ï¼‰
            const spinAngle = 3600 + Math.random() * 360;
            
            // è®¾ç½®è½¬ç›˜æ—‹è½¬
            wheel.style.transform = `rotate(${spinAngle}deg)`;
            
            // è®¡ç®—ç»“æœ
            setTimeout(() => {
                const finalAngle = spinAngle % 360;
                const segmentAngle = 360 / options.length;
                
                // è®¡ç®—æŒ‡é’ˆæŒ‡å‘çš„æ‰‡å½¢ç´¢å¼•
                // ç”±äºæŒ‡é’ˆåœ¨é¡¶éƒ¨ï¼Œè€Œè½¬ç›˜é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œæ‰€ä»¥éœ€è¦è®¡ç®—æŒ‡é’ˆæŒ‡å‘çš„ä½ç½®
                const resultIndex = Math.floor(((360 - finalAngle) % 360) / segmentAngle);
                selectedOption = options[resultIndex % options.length];
                
                // æ˜¾ç¤ºç»“æœ
                document.getElementById('result-content').textContent = selectedOption;
                document.getElementById('result').style.display = 'block';
                
                // é‡ç½®çŠ¶æ€
                isSpinning = false;
                document.getElementById('spin-btn').disabled = false;
                
                // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
            }, 4000); // ç­‰å¾…è½¬ç›˜åœæ­¢æ—‹è½¬
        }
        
        // é‡æ–°å¼€å§‹
        function restart() {
            document.getElementById('options-section').style.display = 'block';
            document.getElementById('wheel-section').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            
            // é‡ç½®é€‰é¡¹
            const optionsList = document.getElementById('options-list');
            optionsList.innerHTML = '';
            
            // æ·»åŠ é»˜è®¤çš„ä¸¤ä¸ªé€‰é¡¹
            for (let i = 0; i < 2; i++) {
                const optionItem = document.createElement('div');
                optionItem.className = 'option-item';
                
                const optionInput = document.createElement('input');
                optionInput.type = 'text';
                optionInput.className = 'option-input';
                optionInput.placeholder = `é€‰é¡¹${i+1}`;
                
                const removeButton = document.createElement('button');
                removeButton.className = 'remove-option';
                removeButton.textContent = 'Ã—';
                removeButton.addEventListener('click', function() {
                    if (document.querySelectorAll('.option-item').length > 2) {
                        this.parentElement.remove();
                        updateOptionsArray();
                    } else {
                        alert('è‡³å°‘éœ€è¦ä¸¤ä¸ªé€‰é¡¹');
                    }
                });
                
                optionItem.appendChild(optionInput);
                optionItem.appendChild(removeButton);
                optionsList.appendChild(optionItem);
            }
            
            // é‡ç½®é€‰é¡¹æ•°ç»„
            options = ['', ''];
            
            // é‡ç½®è½¬ç›˜
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            wheel.style.transform = 'rotate(0deg)';
        }
    </script>
</body>
</html>