<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>记忆力测试(基础版) - 天空之城</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4a90e2;
      --secondary-color: #6c5ce7;
      --accent-color: #00cec9;
      --text-color: #333;
      --light-text: #666;
      --bg-color: #f5f7fa;
      --card-bg: #fff;
      --header-bg: linear-gradient(135deg, #6c5ce7, #4a90e2);
      --footer-bg: #2d3436;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
      --hover-shadow: 0 7px 14px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
      --border-radius: 12px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Microsoft YaHei", sans-serif;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    header {
      background: var(--header-bg);
      color: white;
      padding: 1.5rem 0;
      text-align: center;
      position: relative;
      box-shadow: var(--shadow);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .site-title {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-weight: bold;
    }

    .site-description {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }

    .back-link {
      position: absolute;
      top: 1.5rem;
      left: 1.5rem;
      background-color: rgba(255, 255, 255, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 30px;
      font-size: 0.9rem;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .back-link:hover {
      background-color: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .back-link i {
      font-size: 1rem;
    }

    .main-content {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 2rem;
      flex: 1;
    }

    .memory-container {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      margin-top: 2rem;
      text-align: center;
    }

    .memory-title {
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      color: var(--secondary-color);
    }

    .memory-description {
      margin-bottom: 2rem;
      color: var(--light-text);
    }

    .letter-display {
      font-size: 5rem;
      font-weight: bold;
      margin: 2rem 0;
      color: var(--primary-color);
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .input-container {
      margin: 2rem 0;
      display: none;
    }

    .letter-input {
      font-size: 1.5rem;
      padding: 0.5rem 1rem;
      width: 100px;
      text-align: center;
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      margin-bottom: 1rem;
      text-transform: uppercase;
    }

    .btn {
      display: inline-block;
      background-color: var(--primary-color);
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 30px;
      font-weight: bold;
      transition: var(--transition);
      border: none;
      cursor: pointer;
      font-size: 1rem;
    }

    .button-group {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin: 1rem 0;
    }

    .btn:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background-color: #6c757d;
    }
    
    .btn-secondary:hover {
      background-color: #5a6268;
    }

    .message {
      margin-top: 1rem;
      font-weight: bold;
      min-height: 24px;
    }

    .error {
      color: #e74c3c;
    }

    .success {
      color: #2ecc71;
    }

    .progress {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--light-text);
    }

    footer {
      background-color: var(--footer-bg);
      color: white;
      padding: 1.5rem 0;
      text-align: center;
      margin-top: 3rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .copyright {
      opacity: 0.7;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .memory-title {
        font-size: 1.5rem;
      }
      .letter-display {
        font-size: 4rem;
        height: 100px;
      }
      .back-link {
        top: 1rem;
        left: 1rem;
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
      }
    }

    @media (max-width: 480px) {
      .header-content {
        padding: 0 1rem;
      }
      .main-content {
        padding: 0 1rem;
        margin: 1.5rem auto;
      }
      .memory-container {
        padding: 1.5rem;
      }
      .letter-display {
        font-size: 3.5rem;
        height: 80px;
      }
      .back-link {
        position: relative;
        top: 0;
        left: 0;
        margin: 1rem auto 0;
        display: inline-flex;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="../index.html" class="back-link">
      <i class="fas fa-arrow-left"></i>
      返回首页
    </a>
    <div class="header-content">
      <h1 class="site-title">记忆力测试</h1>
      <p class="site-description">测试并提高你的短期记忆能力</p>
    </div>
  </header>

  <main class="main-content">
    <div class="memory-container">
      <h2 class="memory-title">字母记忆挑战</h2>
      <p class="memory-description">
        系统将随机生成12个大写英文字母，每次显示一个。请记住这些字母的顺序，然后按顺序输入它们。
      </p>
      <div class="letter-display" id="letterDisplay"></div>
      <div class="input-container" id="inputContainer">
        <input type="text" class="letter-input" id="letterInput" maxlength="1" placeholder="?">
        <p class="message" id="message"></p>
      </div>
      <div class="button-group">
        <button class="btn" id="actionButton">开始</button>
        <button class="btn btn-secondary" id="restartButton">重来</button>
      </div>
      <p class="progress" id="progress"></p>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <p class="copyright">© 2023 天空之城 - 多功能工具集</p>
    </div>
  </footer>
<script>
     document.addEventListener('DOMContentLoaded', function() {
      const letterDisplay = document.getElementById('letterDisplay');
      const inputContainer = document.getElementById('inputContainer');
      const letterInput = document.getElementById('letterInput');
      const actionButton = document.getElementById('actionButton');
      const restartButton = document.getElementById('restartButton');
      const message = document.getElementById('message');
      const progress = document.getElementById('progress');
      
      // 26个英文字母除去U和V剩下的24个英文字母
      const letterPairs = [
        ['A', 'B'], ['C', 'D'], ['E', 'F'], ['G', 'H'], ['I', 'J'],
        ['K', 'L'], ['M', 'N'], ['O', 'P'], ['Q', 'R'], ['S', 'T'],
        ['W', 'X'], ['Y', 'Z']
      ];
      
      let generatedLetters = [];
      let currentIndex = 0;
      let isDisplayMode = true;
      let errorCount = 0; // 错误计数器
      
      function generateLetters() {
        generatedLetters = [];
        const tempPairs = [...letterPairs];
        
        while (generatedLetters.length < 12 && tempPairs.length > 0) {
          const randomPairIndex = Math.floor(Math.random() * tempPairs.length);
          const selectedPair = tempPairs[randomPairIndex];
          const randomLetterIndex = Math.floor(Math.random() * selectedPair.length);
          generatedLetters.push(selectedPair[randomLetterIndex]);
          tempPairs.splice(randomPairIndex, 1);
        }
        
        for (let i = generatedLetters.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [generatedLetters[i], generatedLetters[j]] = [generatedLetters[j], generatedLetters[i]];
        }
      }
      
      function startTest() {
        generateLetters();
        currentIndex = 0;
        isDisplayMode = true;
        errorCount = 0; // 重置错误计数器
        letterDisplay.textContent = generatedLetters[currentIndex];
        actionButton.textContent = '下一个';
        inputContainer.style.display = 'none';
        message.textContent = '';
        message.className = 'message';
        updateProgress();
      }
      
      function showNextLetter() {
        currentIndex++;
        if (currentIndex < generatedLetters.length) {
          letterDisplay.textContent = generatedLetters[currentIndex];
          updateProgress();
        } else {
          switchToInputMode();
        }
      }
      
      function switchToInputMode() {
        isDisplayMode = false;
        currentIndex = 0;
        letterDisplay.textContent = '?';
        inputContainer.style.display = 'block';
        actionButton.textContent = '确认';
        letterInput.value = '';
        letterInput.focus();
        updateProgress();
      }
      
      function validateInput() {
        const userInput = letterInput.value.trim().toUpperCase();
        
        if (userInput === '') {
          message.textContent = '请输入一个字母';
          message.className = 'message error';
          return;
        }
        
        if (userInput === generatedLetters[currentIndex]) {
          message.textContent = '正确！';
          message.className = 'message success';
          currentIndex++;
          letterInput.value = '';
          letterInput.focus();
          
          if (currentIndex >= generatedLetters.length) {
            completeTest();
          } else {
            updateProgress();
          }
        } else {
          errorCount++; // 增加错误计数
          
          if (errorCount >= 3) {
            // 连续三次错误，显示正确答案
            message.textContent = '错误！正确的字母是：' + generatedLetters[currentIndex];
            message.className = 'message error';
            errorCount = 0; // 重置错误计数
          } else {
            // 少于三次错误，提示再次尝试
            message.textContent = `错误！请再次尝试输入正确的字母 (${errorCount}/3)`;
            message.className = 'message error';
          }
          
          letterInput.value = '';
          letterInput.focus();
        }
      }
      
      function completeTest() {
        message.textContent = '恭喜！你成功记住了所有字母！';
        message.className = 'message success';
        actionButton.textContent = '开始';
        inputContainer.style.display = 'none';
        letterDisplay.textContent = generatedLetters.join(' ');
      }
      
      function updateProgress() {
        if (isDisplayMode) {
          progress.textContent = `显示第 ${currentIndex + 1} 个字母，共 ${generatedLetters.length} 个`;
        } else {
          progress.textContent = `请输入第 ${currentIndex + 1} 个字母，共 ${generatedLetters.length} 个`;
        }
      }
      
      actionButton.addEventListener('click', function() {
        if (actionButton.textContent === '开始') {
          startTest();
        } else if (actionButton.textContent === '下一个') {
          showNextLetter();
        } else if (actionButton.textContent === '确认') {
          validateInput();
        }
      });
      
      letterInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          validateInput();
        }
      });
      
      // 重来按钮点击事件
      restartButton.addEventListener('click', function() {
        startTest();
      });
    });
  </script>
</body>
</html>